/* TailwindCSS Layer 설정 (PrimeVue 통합) */
@layer tailwind-base, primevue, tailwind-utilities;

@layer tailwind-base {
  @tailwind base;
}

@layer tailwind-utilities {
  @tailwind components;
  @tailwind utilities;
}

/* Dark Blue 테마 CSS 변수 (PRD 10.1) */
:root {
  /* 배경 색상 */
  --color-bg: #1a1a2e;
  --color-header: #16213e;
  --color-sidebar: #0f0f23;
  --color-card: #1e1e38;

  /* 프라이머리 색상 */
  --color-primary: #3b82f6;
  --color-primary-hover: #2563eb;

  /* 시맨틱 색상 */
  --color-success: #22c55e;
  --color-warning: #f59e0b;
  --color-danger: #ef4444;

  /* 텍스트 색상 */
  --color-text: #e8e8e8;
  --color-text-secondary: #888888;
  --color-text-muted: #666666;

  /* 보더 색상 */
  --color-border: #3d3d5c;
  --color-border-light: #4d4d6c;

  /* 계층 아이콘 색상 (PRD 10.1) */
  --color-level-project: #8b5cf6;
  --color-level-wp: #3b82f6;
  --color-level-act: #22c55e;
  --color-level-task: #f59e0b;
}

/* 기본 바디 스타일 - Dark 테마 적용 */
body {
  @apply bg-bg text-text antialiased;
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
}

/* 스크롤바 스타일 (다크 테마) */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-bg-sidebar;
}

::-webkit-scrollbar-thumb {
  @apply bg-border rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-border-light;
}

/* 선택 영역 스타일 */
::selection {
  @apply bg-primary/30 text-white;
}

/* 포커스 링 스타일 */
*:focus-visible {
  @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-bg;
}

/* 링크 기본 스타일 */
a {
  @apply text-primary hover:text-primary-600 transition-colors;
}

/* 코드 블록 스타일 */
code {
  @apply font-mono text-sm bg-surface-50 px-1.5 py-0.5 rounded text-primary-300;
}

pre code {
  @apply bg-transparent p-0;
}

/* PrimeVue 다크 테마 오버라이드 */
.dark {
  /* PrimeVue가 .dark 클래스로 다크 모드 감지 */
}

/* 유틸리티 클래스 */
.card {
  @apply bg-bg-card border border-border rounded-xl p-4 shadow-card;
}

.card-hover {
  @apply hover:shadow-card-hover hover:border-border-light transition-all duration-200;
}

/* 레벨 배지 스타일 */
.level-badge {
  @apply inline-flex items-center justify-center w-6 h-6 rounded-md text-xs font-bold text-white;
}

.level-badge-project {
  @apply bg-level-project;
}

.level-badge-wp {
  @apply bg-level-wp;
}

.level-badge-act {
  @apply bg-level-act;
}

.level-badge-task {
  @apply bg-level-task;
}

/* 상태 배지 스타일 */
.status-badge {
  @apply inline-flex items-center px-2 py-0.5 rounded text-xs font-medium;
}

.status-todo {
  @apply bg-text-muted/20 text-text-secondary;
}

.status-design {
  @apply bg-primary/20 text-primary;
}

.status-implement {
  @apply bg-warning/20 text-warning;
}

.status-verify {
  @apply bg-success/20 text-success;
}

.status-done {
  @apply bg-success text-white;
}

/* 카테고리 태그 스타일 */
.category-tag {
  @apply inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium;
}

.category-dev {
  @apply bg-primary/20 text-primary border border-primary/30;
}

.category-defect {
  @apply bg-danger/20 text-danger border border-danger/30;
}

.category-infra {
  @apply bg-level-project/20 text-level-project border border-level-project/30;
}

/* ============================================
 * NodeIcon 컴포넌트 스타일 (TSK-08-01)
 * CSS 클래스 중앙화 원칙 준수
 * ============================================ */

/* 노드 아이콘 기본 스타일 */
.node-icon {
  @apply flex items-center justify-center w-6 h-6 rounded text-white text-sm flex-shrink-0;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* 노드 타입별 배경색 (CSS 클래스로 중앙 관리) */
.node-icon-project {
  @apply bg-level-project;
}

.node-icon-wp {
  @apply bg-level-wp;
}

.node-icon-act {
  @apply bg-level-act;
}

.node-icon-task {
  @apply bg-level-task;
}

/* 반응형: 모바일 노드 아이콘 */
@media (max-width: 767px) {
  .node-icon {
    @apply w-5 h-5 text-xs;
  }
}

/* ============================================
 * PrimeVue Tree 커스텀 스타일 (TSK-08-01)
 * ============================================ */

/* WBS Tree 컨테이너 */
.wbs-tree {
  @apply p-2;
}

/* 노드 콘텐츠 기본 스타일 */
.wbs-tree :deep(.p-tree-node-content) {
  @apply rounded-lg transition-colors duration-150 py-1.5 px-2 cursor-pointer;
}

/* 노드 호버 상태 */
.wbs-tree :deep(.p-tree-node-content:hover) {
  @apply bg-bg-header;
}

/* 노드 선택 상태 */
.wbs-tree :deep(.p-tree-node-content.p-tree-node-selected) {
  @apply bg-primary/20;
}

/* 노드 포커스 상태 */
.wbs-tree :deep(.p-tree-node-content:focus) {
  @apply ring-2 ring-primary ring-offset-2 ring-offset-bg-sidebar;
}

/* 토글 아이콘 스타일 */
.wbs-tree :deep(.p-tree-node-toggle-button) {
  @apply text-text-secondary hover:text-text hover:bg-border/30 rounded transition-colors;
  width: 1.5rem;
  height: 1.5rem;
}

/* 토글 아이콘 비활성화 (자식 없음) */
.wbs-tree :deep(.p-tree-node-leaf > .p-tree-node-content > .p-tree-node-toggle-button) {
  visibility: hidden;
}

/* 자식 노드 들여쓰기 */
.wbs-tree :deep(.p-tree-node-children) {
  @apply ml-4 border-l border-border/30 pl-2;
}

/* 노드 라벨 컨테이너 */
.wbs-tree-node-label {
  @apply flex items-center gap-2 flex-1;
}

/* 노드 제목 텍스트 */
.wbs-tree-node-title {
  @apply text-sm truncate;
}

/* 노드 타입별 텍스트 색상 */
.wbs-tree-node-title-wp {
  @apply text-text font-medium;
}

.wbs-tree-node-title-act {
  @apply text-text-secondary;
}

.wbs-tree-node-title-task {
  @apply text-text-muted text-xs;
}

/* 진행률 표시 */
.wbs-tree-node-progress {
  @apply text-xs text-text-muted ml-auto mr-2;
}

/* ============================================
 * CategoryTag 컴포넌트 스타일 (TSK-08-02)
 * CSS 클래스 중앙화 원칙 준수
 * ============================================ */

.category-tag-development {
  @apply bg-primary/20 border border-primary/30 rounded-xl px-2 py-1;
}

.category-tag-defect {
  @apply bg-danger/20 border border-danger/30 rounded-xl px-2 py-1;
}

.category-tag-infrastructure {
  @apply bg-level-project/20 border border-level-project/30 rounded-xl px-2 py-1;
}

/* ============================================
 * ProgressBar 컴포넌트 스타일 (TSK-08-02)
 * CSS 클래스 중앙화 원칙 준수
 * ============================================ */

.progress-bar-low {
  @apply bg-danger;
}

.progress-bar-medium {
  @apply bg-warning;
}

.progress-bar-high {
  @apply bg-success;
}
