# 사용자 매뉴얼 (080-manual.md)

**Template Version:** 1.0.0 — **Last Updated:** 2025-12-17

> **목적**: 의존관계 그래프 필터 및 계층 접기 기능 사용자 가이드

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-06-03 |
| Task명 | 의존관계 그래프 필터 및 계층 접기 |
| Category | development |
| 작성일 | 2025-12-17 |
| 작성자 | Claude |
| 대상 사용자 | jjiban 사용자 (프로젝트 관리자, 개발자) |

---

## 1. 기능 개요

### 1.1 소개

의존관계 그래프 필터 및 계층 접기는 대규모 프로젝트(100개 이상 Task)에서 복잡한 의존관계를 효과적으로 탐색할 수 있도록 돕는 기능입니다.

**핵심 가치**:
- **대규모 프로젝트 가독성**: WP/ACT 그룹 단위로 축소하여 구조 파악 용이
- **초점 뷰**: 특정 Task 중심으로 의존관계만 표시하여 복잡도 감소
- **필터링**: 카테고리/상태별 필터로 관심 있는 Task만 표시
- **URL 공유**: 필터 설정을 URL로 저장하여 팀원과 공유 가능

### 1.2 주요 기능

| 기능 | 설명 |
|------|------|
| 카테고리 필터 | 개발/결함/인프라 Task만 선택적으로 표시 |
| 상태 필터 | 특정 상태(진행중, 완료 등)의 Task만 표시 |
| 계층 모드 | Full(전체), WP 그룹, ACT 그룹 중 선택 |
| 초점 뷰 | 특정 Task를 중심으로 1~3 depth 내 의존관계만 표시 |
| 그룹 노드 토글 | WP/ACT 그룹을 축소/확장하여 계층 탐색 |
| URL 파라미터 공유 | 필터 설정을 URL에 저장하여 북마크/공유 가능 |

---

## 2. 필터 패널 사용법

### 2.1 필터 패널 열기/닫기

**위치**: 의존관계 그래프 모달 좌측 상단

**조작 방법**:
1. **[▲ 필터]** 버튼 클릭: 필터 패널 펼치기/접기
2. 필터 패널 헤더는 항상 표시되며, 현재 통계를 확인할 수 있습니다.

**초기 상태** (화면 크기별):
- Desktop (≥1200px): 펼침 (기본)
- Tablet (768-1199px): 접힘 (기본)
- Mobile (<768px): 접힘 (토글 가능)

**통계 표시**:
- 노드 수: 현재 필터에 적용된 Task 개수
- 엣지 수: 현재 표시된 의존관계 화살표 개수

### 2.2 카테고리 필터

**목적**: Task 카테고리(개발/결함/인프라)별로 필터링

**조작 방법**:
1. 필터 패널에서 **카테고리** 섹션 확인
2. Checkbox를 선택/해제하여 원하는 카테고리만 표시
   - ☑ 개발 (35): 개발 Task만 표시
   - ☑ 결함 (8): 결함 Task만 표시
   - ☑ 인프라 (2): 인프라 Task만 표시
3. 여러 개 선택 가능 (AND 조건)
4. 모두 체크 해제 시 전체 Task 표시

**예시**:
- 개발 Task만 보고 싶을 때: "개발"만 체크
- 진행 중인 개발과 결함만 보고 싶을 때: "개발", "결함" 체크 + 상태 필터 병행

### 2.3 상태 필터

**목적**: Task 상태(진행중, 완료 등)별로 필터링

**조작 방법**:
1. 필터 패널에서 **상태** 섹션 확인
2. **MultiSelect 드롭다운** 클릭하여 상태 선택
3. 선택된 상태는 드롭다운에 최대 3개 라벨로 표시
4. 여러 개 선택 가능 (OR 조건)
5. 모두 선택 해제 시 전체 Task 표시

**상태 코드 설명**:
- `[ ]`: Todo (미시작)
- `[bd]`: Basic Design (기본설계)
- `[dd]`: Detail Design (상세설계)
- `[im]`: Implementation (구현)
- `[vf]`: Verify (검증)
- `[xx]`: Done (완료)

**예시**:
- 진행 중인 Task만 보고 싶을 때: `[im]`, `[vf]` 선택
- 완료된 Task 제외: `[im]`, `[vf]`, `[bd]`, `[dd]` 선택 (완료 제외)

### 2.4 계층 모드 (Hierarchy Mode)

**목적**: 그래프 표시 방식 선택 (전체 Task vs 그룹 단위)

**모드 종류**:

| 모드 | 설명 | 용도 |
|------|------|------|
| **전체 (Full)** | 모든 Task를 개별 노드로 표시 | 상세 의존관계 확인 |
| **WP 그룹** | Work Package 단위로 그룹화 | 프로젝트 전체 구조 파악 |
| **ACT 그룹** | Activity 단위로 그룹화 | 중간 수준 계층 탐색 |

**조작 방법**:
1. 필터 패널에서 **계층 뷰** 섹션 확인
2. RadioButton으로 원하는 모드 선택
3. 그래프가 자동으로 재구성됨

**예시**:
- 프로젝트 전체 구조를 빠르게 파악하고 싶을 때: **WP 그룹** 선택
- 특정 WP 내 Task 간 의존관계를 확인하고 싶을 때: **전체** 선택 후 해당 WP 확대

### 2.5 초점 뷰 (Focus View)

**목적**: 특정 Task를 중심으로 지정된 depth 내의 의존관계만 표시

**조작 방법**:
1. 필터 패널에서 **초점 Task** 섹션 확인
2. **Select 드롭다운**에서 초점으로 설정할 Task 선택
3. **깊이 RadioButton**에서 depth (1~3) 선택
   - Depth 1: 직접 의존하는 Task만 표시
   - Depth 2: 2단계 의존관계까지 표시 (기본값)
   - Depth 3: 3단계 의존관계까지 표시
4. **[적용]** 버튼 클릭
5. 그래프에 초점 Task 중심 의존관계만 표시됨

**초점 Task 하이라이트**:
- **Depth 0 (초점 Task)**: 노란색 테두리 + 링 효과
- **Depth 1**: 실선 테두리
- **Depth 2**: 점선 테두리
- **Depth 3**: 얇은 점 테두리

**예시**:
- TSK-06-03에 직접 의존하는 Task만 확인: TSK-06-03 선택 → Depth 1 → [적용]
- TSK-06-03과 간접적으로 연결된 모든 Task 확인: TSK-06-03 선택 → Depth 3 → [적용]

**주의사항**:
- 초점 Task를 선택하지 않으면 depth RadioButton이 비활성화됩니다.
- 초점 뷰와 카테고리/상태 필터를 함께 사용할 수 있습니다.

### 2.6 필터 초기화

**목적**: 모든 필터 설정을 기본값으로 복원

**조작 방법**:
1. 필터 패널 헤더에서 **[🔄 초기화]** 버튼 클릭
2. 모든 필터가 기본값으로 리셋됨:
   - 카테고리: 전체 선택
   - 상태: 전체 선택
   - 계층 뷰: 전체
   - 초점 Task: 없음
3. URL 쿼리 파라미터 제거
4. 그래프에 전체 Task 표시

**사용 시점**:
- 복잡한 필터 설정을 빠르게 제거하고 싶을 때
- URL 공유 후 기본 화면으로 돌아가고 싶을 때

---

## 3. 그룹 노드 조작법

### 3.1 그룹 노드란?

**정의**: WP(Work Package) 또는 ACT(Activity) 계층을 대표하는 노드. 여러 Task를 포함하며 축소/확장 가능.

**표시 정보**:
- 그룹 ID 및 제목 (예: "WP-06: 의존관계 시각화")
- 진행률 바 (완료/전체 Task 비율)
- 진행률 텍스트 (예: "1/3 (33%)")

### 3.2 그룹 노드 축소/확장

**조작 방법**:
1. 그룹 노드 헤더 클릭
2. 아이콘 변경:
   - **▼**: 확장 상태 (하위 Task 표시)
   - **▶**: 축소 상태 (하위 Task 숨김)
3. 애니메이션과 함께 하위 Task 노드 표시/숨김

**확장 상태 (▼)**:
```
┌────────────────────────┐
│ ▼ WP-06: 의존관계 시각화│
│ ██████░░░░░░░░ 33%     │
│ 1/3 (33%)              │
├────────────────────────┤
│ ● TSK-06-01 [im]       │
│ ● TSK-06-02 [ ]        │
│ ● TSK-06-03 [bd]       │
└────────────────────────┘
```

**축소 상태 (▶)**:
```
┌────────────────────────┐
│ ▶ WP-06: 의존관계 시각화│
│ ██████░░░░░░░░ 33%     │
│ 1/3 (33%)              │
└────────────────────────┘
```

**엣지 처리**:
- 축소 시: 그룹 내부 엣지 숨김, 외부 연결 엣지는 그룹 노드로 리라우팅
- 확장 시: 전체 엣지 복원

### 3.3 그룹 노드 활용 시나리오

**시나리오 1: 프로젝트 전체 구조 파악**
1. 계층 뷰 → **WP 그룹** 선택
2. 모든 WP 그룹 노드 확인 (축소 상태)
3. 각 WP의 진행률 비교

**시나리오 2: 특정 WP 내부 상세 확인**
1. 계층 뷰 → **WP 그룹** 선택
2. 관심 있는 WP 그룹 노드 클릭 (확장)
3. 하위 Task 간 의존관계 확인

**시나리오 3: 계층 간 전환**
1. WP 그룹 → ACT 그룹 → 전체 순으로 전환
2. 각 계층 수준에서 의존관계 구조 파악

---

## 4. URL 파라미터 공유

### 4.1 URL 파라미터란?

**정의**: 필터 설정을 URL 쿼리 파라미터로 저장하여 팀원과 공유하거나 북마크할 수 있는 기능.

**저장되는 정보**:
- 선택된 카테고리 목록
- 선택된 상태 목록
- 계층 모드 (WP/ACT 그룹)
- 초점 Task ID
- 초점 깊이 (1~3)

### 4.2 URL 파라미터 저장

**자동 저장**:
- 필터를 변경하면 300ms 후 자동으로 URL에 반영 (debounce)
- 브라우저 주소창에서 URL 확인 가능

**URL 예시**:
```
http://localhost:3000/?categories=development,infrastructure&statuses=im,vf&hierarchyMode=wp&focusTask=TSK-06-03&focusDepth=2
```

**파라미터 설명**:
- `categories=development,infrastructure`: 개발, 인프라 카테고리 선택
- `statuses=im,vf`: 구현, 검증 상태 선택 (괄호 제거됨)
- `hierarchyMode=wp`: WP 그룹 모드
- `focusTask=TSK-06-03`: 초점 Task ID
- `focusDepth=2`: 초점 깊이 2

### 4.3 URL 파라미터 공유

**공유 방법**:
1. 원하는 필터 설정 적용
2. 브라우저 주소창의 URL 복사 (Ctrl+L → Ctrl+C)
3. 팀원에게 전달 (이메일, 메신저, 문서 등)
4. 팀원이 URL 접속 시 동일한 필터 설정으로 그래프 표시

**활용 시나리오**:
- **코드 리뷰**: "이 Task의 의존관계를 확인해주세요" → 초점 뷰 URL 공유
- **상태 보고**: "진행 중인 개발 Task 현황입니다" → 카테고리+상태 필터 URL 공유
- **프로젝트 계획**: "WP-06의 전체 구조입니다" → WP 그룹 모드 URL 공유

### 4.4 URL 파라미터 복원

**자동 복원**:
- URL 파라미터가 있는 상태로 페이지 접속 시 자동으로 필터 복원
- 모달 열림 시 URL 파라미터 읽어서 필터 설정 적용

**복원 실패 시**:
- URL 파라미터가 유효하지 않으면 기본값으로 복원
- 경고 메시지 표시: "URL 파라미터가 올바르지 않습니다. 기본 설정으로 복원합니다."

### 4.5 URL 파라미터 길이 제한

**제약 사항**:
- URL 파라미터 최대 길이: 2000자 (브라우저 제한)
- 길이 초과 시 경고 메시지 표시: "필터가 너무 많아 일부 설정이 URL에 저장되지 않습니다."

**압축 전략** (자동 적용):
1. 우선순위 높은 필터만 저장:
   - focusTask (최우선)
   - hierarchyMode
   - categories (최대 3개)
   - statuses (최대 3개)
2. 기본값(`hierarchyMode=full`, `focusDepth=2`)은 생략

**대안**:
- 복잡한 필터 설정은 localStorage에 저장 (향후 개선 예정)
- 필터 프리셋 기능 추가 (향후 개선 예정)

---

## 5. 키보드 단축키

### 5.1 필터 패널 탐색

| 키 | 동작 |
|-----|------|
| Tab | 다음 필터 컨트롤로 이동 |
| Shift+Tab | 이전 필터 컨트롤로 이동 |
| Space | Checkbox 선택/해제 (포커스 시) |
| Enter | [적용] 버튼 클릭 (포커스 시) |

### 5.2 그래프 조작

| 키 | 동작 |
|-----|------|
| 마우스 휠 | 줌 인/아웃 |
| 드래그 | 그래프 이동 |
| Ctrl+휠 | 빠른 줌 인/아웃 |

---

## 6. 주의사항 및 제한사항

### 6.1 성능 제한

| 항목 | 제한 | 비고 |
|------|------|------|
| Task 개수 | 500개 이하 권장 | 500개 초과 시 경고 메시지 표시 |
| 필터 응답 시간 | 200ms 이하 (100개 노드 기준) | 성능 저하 시 가상화 권장 |
| 그룹 토글 애니메이션 | 100ms 이하 | 부드러운 사용자 경험 보장 |
| URL 파라미터 길이 | 2000자 이하 | 초과 시 압축 또는 생략 |

### 6.2 예상 오류 상황

| 상황 | 메시지 | 복구 방법 |
|------|--------|----------|
| 초점 Task가 필터링되어 제외됨 | "선택한 초점 Task가 현재 필터에서 제외되었습니다." | 초점 뷰 비활성화 또는 필터 조정 |
| 필터 조건에 맞는 Task 없음 | "필터 조건에 맞는 Task가 없습니다." | 필터 초기화 안내 |
| URL 파라미터 유효하지 않음 | "URL 파라미터가 올바르지 않습니다. 기본 설정으로 복원합니다." | 자동 복구 (기본값) |
| Depth 값 초과 | "깊이 값은 1~3 사이여야 합니다." | 자동 클램핑 (1~3 범위) |

### 6.3 브라우저 호환성

**지원 브라우저**:
- Chrome/Edge (최신 버전)
- Firefox (최신 버전)
- Safari (최신 버전)

**권장 환경**:
- Desktop 브라우저 (1200px 이상 해상도)
- Mobile 브라우저 (접근성 지원, 터치 제스처)

### 6.4 알려진 제약사항

1. **그룹 노드 내 Task 1개**: 그룹 노드 생성하지 않고 Task 노드만 표시 (선택 사항)
2. **순환 의존성**: BFS 알고리즘으로 처리하나, 그래프가 복잡할 수 있음
3. **URL 히스토리**: 필터 변경 시 히스토리 쌓이지 않음 (router.replace 사용)

---

## 7. 사용 시나리오 예시

### 7.1 시나리오 1: 진행 중인 개발 Task만 확인

**목표**: 현재 진행 중인 개발 Task의 의존관계 확인

**단계**:
1. 의존관계 그래프 모달 열기
2. 필터 패널 → 카테고리: "개발"만 체크
3. 필터 패널 → 상태: `[im]` 선택
4. 그래프에서 진행 중인 개발 Task만 표시됨
5. URL 복사하여 팀원과 공유

### 7.2 시나리오 2: 특정 Task의 선행/후행 관계 파악

**목표**: TSK-06-03의 직접 의존 Task만 확인

**단계**:
1. 의존관계 그래프 모달 열기
2. 필터 패널 → 초점 Task: "TSK-06-03" 선택
3. 필터 패널 → 깊이: 1 선택
4. [적용] 버튼 클릭
5. TSK-06-03 중심으로 직접 의존하는 Task만 하이라이트 표시

### 7.3 시나리오 3: 프로젝트 전체 구조 파악 후 상세 확인

**목표**: 프로젝트 구조를 빠르게 파악한 후 특정 WP 상세 확인

**단계**:
1. 의존관계 그래프 모달 열기
2. 필터 패널 → 계층 뷰: "WP 그룹" 선택
3. 모든 WP 그룹 노드의 진행률 확인
4. 관심 있는 WP 그룹 노드 클릭 (확장)
5. 하위 Task 간 의존관계 확인
6. 필요 시 계층 뷰를 "전체"로 전환하여 더 상세한 의존관계 확인

### 7.4 시나리오 4: 완료된 Task 제외하고 미완료 Task만 확인

**목표**: 아직 완료되지 않은 Task의 의존관계 확인

**단계**:
1. 의존관계 그래프 모달 열기
2. 필터 패널 → 상태: `[ ]`, `[bd]`, `[dd]`, `[im]`, `[vf]` 선택 (`[xx]` 제외)
3. 그래프에서 미완료 Task만 표시됨
4. 의존관계 확인 후 작업 우선순위 결정

---

## 8. 문제 해결 (Troubleshooting)

### 8.1 필터가 적용되지 않음

**증상**: 필터를 변경해도 그래프가 변하지 않음

**해결 방법**:
1. 브라우저 콘솔 확인 (F12 → Console 탭)
2. JavaScript 오류 확인
3. 페이지 새로고침 (F5)
4. 필터 초기화 버튼 클릭
5. 문제 지속 시 개발팀 문의

### 8.2 그룹 노드가 표시되지 않음

**증상**: 계층 뷰를 "WP 그룹"으로 변경해도 그룹 노드가 표시되지 않음

**해결 방법**:
1. 필터 조건 확인: 현재 필터에 포함된 Task가 있는지 확인
2. 그룹 내 Task가 모두 필터링되면 그룹 노드가 제외됨 (정상 동작)
3. 필터 초기화 후 다시 시도

### 8.3 초점 뷰가 작동하지 않음

**증상**: 초점 Task를 선택하고 [적용]을 눌러도 그래프가 변하지 않음

**해결 방법**:
1. 초점 Task가 현재 필터에 포함되어 있는지 확인
2. 초점 Task가 필터링되면 자동으로 비활성화됨
3. 필터 조정 후 다시 시도

### 8.4 URL 공유 후 필터가 복원되지 않음

**증상**: URL을 공유했는데 팀원 화면에서 필터가 적용되지 않음

**해결 방법**:
1. URL 전체가 복사되었는지 확인 (쿼리 파라미터 포함)
2. URL 인코딩 문제 확인 (특수 문자 포함 시)
3. 페이지 새로고침 (F5)
4. 브라우저 캐시 삭제 후 재접속

---

## 9. FAQ

### Q1: 필터 설정을 저장할 수 있나요?

A: 현재는 URL 파라미터로만 저장 가능합니다. 필터 프리셋 기능은 향후 추가 예정입니다.

### Q2: 500개 이상의 Task가 있는데 성능이 느려요.

A: 대규모 프로젝트는 계층 모드(WP/ACT 그룹)를 사용하거나, 카테고리/상태 필터로 표시 Task 수를 줄이는 것을 권장합니다.

### Q3: 그룹 노드 축소 시 엣지는 어떻게 표시되나요?

A: 그룹 내부 엣지는 숨겨지고, 외부 연결 엣지는 그룹 노드로 리라우팅됩니다. 중복 엣지는 자동으로 제거됩니다.

### Q4: 초점 뷰에서 depth 3까지 보여도 Task가 적어요.

A: 초점 Task로부터 3단계 이내 의존관계만 표시하므로, 연결되지 않은 Task는 제외됩니다. 전체 Task를 보려면 초점 뷰를 비활성화하세요.

### Q5: 필터 패널이 자동으로 접히는 이유는?

A: 화면 크기가 1200px 미만(Tablet/Mobile)일 때 기본적으로 접힌 상태입니다. 토글 버튼으로 펼칠 수 있습니다.

### Q6: URL 파라미터가 너무 길어서 공유할 수 없어요.

A: URL 파라미터는 2000자 제한이 있습니다. 필터 개수를 줄이거나, 우선순위 높은 필터(초점 Task, 계층 모드)만 사용하세요. 향후 localStorage 저장 기능 추가 예정입니다.

---

## 10. 관련 문서

- 상세설계: `020-detail-design.md`
- 테스트 명세: `026-test-specification.md`
- 통합 테스트: `070-integration-test.md`
- PRD: `.jjiban/projects/jjiban개선/prd.md` (섹션 11.4)
- 선행 Task: `TSK-06-01/030-implementation.md`

---

## 11. 피드백 및 개선 제안

**피드백 방법**:
- GitHub Issue 등록
- 프로젝트 관리자에게 직접 전달

**개선 제안 접수 중**:
- 필터 프리셋 저장 기능
- 모바일 환경 Drawer 형태 필터 패널
- URL 파라미터 압축 알고리즘 개선
- 초점 뷰 depth별 테두리 스타일 강조

---

<!--
author: Claude
Template Version: 1.0.0
-->
