# Gantt 차트 의존성 화살표 매뉴얼 (080-manual.md)

**Task ID:** TSK-06-02
**Version:** 1.0
**Last Updated:** 2025-12-18

---

## 1. 개요

이 문서는 jjiban 프로젝트의 Gantt 차트 의존성 화살표 기능 사용 방법을 설명합니다.

### 1.1 기능 개요

Gantt 차트에서 Task 간 의존관계를 SVG 화살표로 시각화하여 프로젝트의 작업 흐름을 직관적으로 파악할 수 있습니다.

**주요 기능:**
- Task 간 의존관계를 계단식 화살표로 표시
- 작업 상태에 따른 화살표 색상 구분
- 화살표 호버 시 의존관계 정보 표시
- Task 선택 시 관련 화살표 하이라이트
- 순환 의존성 오류 감지 및 표시

---

## 2. 사용 방법

### 2.1 Gantt 차트 접근

```bash
# jjiban 실행
npx jjiban

# 브라우저에서 Gantt 메뉴 선택
http://localhost:3000/gantt?project=<project-id>
```

### 2.2 화살표 보기

1. 프로젝트 선택 시 자동으로 Gantt 차트 및 의존성 화살표가 표시됩니다.
2. 화살표는 선행 Task의 오른쪽 끝에서 후행 Task의 왼쪽 끝으로 연결됩니다.
3. 계단식(Step Path) 형태로 렌더링되어 가독성이 높습니다.

### 2.3 화살표 인터랙션

**마우스 호버:**
- 화살표에 마우스를 올리면 Tooltip이 표시됩니다.
- Tooltip 내용: "선행Task → 후행Task" (예: "TSK-01-01 → TSK-01-02")
- 화살표 두께가 굵어지고 강조됩니다.

**화살표 클릭:**
- 화살표를 클릭하면 후행 Task가 선택됩니다.
- 선택된 Task와 관련된 모든 화살표가 노란색으로 하이라이트됩니다.
- 선택되지 않은 화살표는 투명도가 낮아집니다.

**Task 선택:**
- Gantt 차트에서 Task 바를 클릭하면 해당 Task의 모든 의존 화살표가 하이라이트됩니다.
- 선택 해제: 빈 공간 클릭 또는 ESC 키

---

## 3. 화살표 색상 의미

의존관계의 진행 상태를 색상으로 시각화합니다:

| 색상 | 상태 | 의미 | CSS 클래스 |
|------|------|------|------------|
| 녹색 (green) | 완료 | 선행/후행 Task 모두 [xx] 완료 상태 | `.gantt-arrow-completed` |
| 파란색 (blue) | 진행중 | 하나 이상의 Task가 [im] 구현 또는 [vf] 검증 상태 | `.gantt-arrow-active` |
| 회색 (gray) | 대기 | 작업 대기 또는 계획 단계 | `.gantt-arrow-pending` |
| 빨간색 (red, 점선) | 오류 | 순환 의존성 감지 | `.gantt-arrow-error` |
| 노란색 (yellow) | 선택됨 | Task 선택 시 관련 화살표 강조 | `.gantt-arrow-highlighted` |

---

## 4. 주요 기능 설명

### 4.1 계단식 경로 (Step Path)

화살표는 직선이 아닌 계단식으로 렌더링되어 가독성을 높입니다:

```
선행Task [===]
             →→
               ↓
               →→ [===] 후행Task
```

**SVG 경로 형식:**
- M (Move): 시작점으로 이동
- H (Horizontal): 수평선 그리기
- V (Vertical): 수직선 그리기
- 화살촉: SVG `<marker>` 요소 사용

### 4.2 가상화 렌더링

**성능 최적화:**
- 100개 미만 화살표: 전체 렌더링
- 100개 이상 화살표: 뷰포트 내 화살표만 렌더링
- 스크롤/줌 시 자동으로 보이는 화살표 재계산

### 4.3 순환 의존성 감지

**오류 표시:**
- 순환 의존성이 감지되면 해당 화살표가 빨간색 점선으로 표시됩니다.
- 예: TSK-A → TSK-B → TSK-C → TSK-A
- 애니메이션 효과: 점선이 흐르는 효과로 경고

---

## 5. 키보드 단축키

| 키 | 기능 |
|----|------|
| Tab | 다음 화살표로 포커스 이동 (접근성) |
| Shift+Tab | 이전 화살표로 포커스 이동 |
| Enter | 포커스된 화살표 선택 |
| ESC | 선택 해제 |

**접근성 지원:**
- 모든 화살표는 `tabindex="0"` 설정으로 키보드 접근 가능
- ARIA 속성으로 스크린 리더 지원
- `role="link"`, `aria-label="선행Task에서 후행Task로"`

---

## 6. 알려진 제한사항

### 6.1 Frappe Gantt 통합 제약

1. **Task 바 DOM 속성 필요**
   - Gantt Task 바에 `data-task-id` 속성이 필요합니다.
   - 현재 Frappe Gantt 초기화 후 DOM 조작으로 속성을 추가하는 방식입니다.

2. **줌/팬 동기화**
   - Gantt 차트를 줌하거나 스크롤할 때 화살표가 자동으로 재계산되지 않을 수 있습니다.
   - 해결: 브라우저 창 크기를 조정하면 화살표가 재계산됩니다.

### 6.2 성능 제약

1. **100개 이상 Task**
   - 100개 이상의 Task가 있을 경우, 화살표 렌더링이 가상화됩니다.
   - 스크롤 시 약간의 지연이 있을 수 있습니다.

2. **리사이즈 이벤트**
   - 브라우저 창 크기 조정 시 모든 화살표가 재계산됩니다.
   - 리사이즈 중 일시적인 렌더링 지연이 발생할 수 있습니다.

---

## 7. 문제 해결

### 7.1 화살표가 표시되지 않을 때

**원인 1: Task 바 DOM 속성 누락**
- 증상: Gantt 차트는 보이지만 화살표가 없음
- 해결: 페이지 새로고침 (F5)

**원인 2: 의존관계 데이터 없음**
- 증상: wbs.md에 `depends:` 필드가 없음
- 해결: wbs.md에 의존관계 추가 후 저장

**원인 3: 순환 의존성 오류**
- 증상: 화살표가 빨간색 점선으로 표시
- 해결: wbs.md에서 순환 의존성 제거

### 7.2 화살표 위치가 잘못될 때

**원인: Gantt 차트 렌더링 미완료**
- 증상: 화살표가 잘못된 위치에 표시됨
- 해결: 3-5초 대기 후 자동으로 재계산됨

**원인: 브라우저 줌 레벨**
- 증상: 브라우저 줌(Ctrl+Plus/Minus) 사용 시 위치 불일치
- 해결: 브라우저 줌을 100%로 설정 (Ctrl+0)

### 7.3 성능 문제

**증상: 화살표 렌더링이 느림**
- 원인: 100개 이상의 Task로 인한 가상화 렌더링
- 해결: WBS 구조를 Activity 단위로 분할하여 Task 개수 감소

---

## 8. 고급 사용법

### 8.1 wbs.md 의존관계 설정

**단일 의존관계:**
```markdown
### TSK-01-02: 터미널 UI 컴포넌트
- depends: TSK-01-01
```

**다중 의존관계:**
```markdown
### TSK-04-01: 전역 터미널 및 워크플로우 통합
- depends: TSK-01-02,TSK-02-01,TSK-02-03
```

### 8.2 CSS 커스터마이징

화살표 스타일은 `app/assets/css/main.css`에서 수정 가능합니다:

```css
/* 완료 상태 화살표 색상 변경 */
.gantt-arrow-completed {
  stroke: var(--color-success); /* 기본: 녹색 */
}

/* 화살표 두께 변경 */
.gantt-arrow {
  stroke-width: 2; /* 기본: 2px */
}

/* 호버 시 두께 변경 */
.gantt-arrow:hover {
  stroke-width: 3; /* 기본: 3px */
}
```

---

## 9. 참조 문서

- **기본설계**: `.jjiban/projects/jjiban개선/tasks/TSK-06-02/010-basic-design.md`
- **UI 설계**: `.jjiban/projects/jjiban개선/tasks/TSK-06-02/011-ui-design.md`
- **상세설계**: `.jjiban/projects/jjiban개선/tasks/TSK-06-02/020-detail-design.md`
- **구현 문서**: `.jjiban/projects/jjiban개선/tasks/TSK-06-02/030-implementation.md`
- **테스트 명세**: `.jjiban/projects/jjiban개선/tasks/TSK-06-02/026-test-specification.md`

---

## 10. FAQ

**Q1: 화살표가 너무 많아서 복잡해요.**
- A: 의존관계 그래프 모달 (TSK-06-01, TSK-06-03)을 사용하여 필터링된 의존관계를 확인하세요.

**Q2: Gantt 차트에서 화살표를 삭제할 수 있나요?**
- A: 현재 버전에서는 화살표 클릭으로 의존관계를 삭제할 수 없습니다. wbs.md 파일을 직접 수정해야 합니다.

**Q3: 화살표 애니메이션을 끌 수 있나요?**
- A: main.css에서 `.gantt-arrow-error` 클래스의 `animation` 속성을 제거하면 됩니다.

**Q4: 화살표가 Task 바를 가로막아요.**
- A: 화살표는 `z-index: 10`으로 Task 바(z-index: 1) 위에 렌더링됩니다. 이는 의도된 동작입니다.

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 1.0 | 2025-12-18 | 초안 작성 | Claude Code |

---

<!--
author: Claude Code
Template Version: 1.0.0
Created: 2025-12-18
-->
