# TSK-01-02: 터미널 UI 컴포넌트 - 테스트 명세

## 문서 정보

| 항목 | 내용 |
|------|------|
| Task ID | TSK-01-02 |
| 문서 버전 | 1.0 |
| 작성일 | 2025-12-17 |

---

## 1. 단위 테스트

### 1.1 useTerminalStore

| TC ID | 테스트 케이스 | 입력 | 기대 결과 |
|-------|-------------|------|----------|
| TC-UT-01 | 초기 상태 확인 | - | sessions 빈 Map, activeSessionId null |
| TC-UT-02 | 세션 생성 성공 | createSession() | sessions에 추가, activeSessionId 설정 |
| TC-UT-03 | 세션 삭제 | closeSession(id) | sessions에서 제거, 다른 세션 선택 |
| TC-UT-04 | 활성 세션 전환 | setActiveSession(id) | activeSessionId 변경 |
| TC-UT-05 | 상태 업데이트 | updateSessionStatus(id, 'running') | session.status 변경 |

### 1.2 useTerminal Composable

| TC ID | 테스트 케이스 | 입력 | 기대 결과 |
|-------|-------------|------|----------|
| TC-UT-06 | createAndConnect | - | 세션 생성 및 활성화 |
| TC-UT-07 | executeCommand | command | 명령어 전송, 상태 업데이트 |
| TC-UT-08 | getOrCreateTaskSession | taskId | 기존 세션 재사용 또는 신규 생성 |

### 1.3 TerminalSessionList

| TC ID | 테스트 케이스 | 입력 | 기대 결과 |
|-------|-------------|------|----------|
| TC-UT-09 | 세션 목록 렌더링 | sessions 배열 | 항목 수 일치 |
| TC-UT-10 | 세션 선택 | 항목 클릭 | select 이벤트 emit |
| TC-UT-11 | 세션 닫기 | 닫기 버튼 클릭 | close 이벤트 emit |

---

## 2. 통합 테스트

### 2.1 TC-IT-01: 세션 생성 플로우

**시나리오**: 새 세션 버튼 클릭하여 터미널 세션 생성

**사전 조건**: 터미널 다이얼로그 열림

**테스트 단계**:
1. "+ 새 세션" 버튼 클릭
2. API 호출 확인 (POST /api/terminal/session)
3. 세션 목록에 항목 추가 확인
4. TerminalView 렌더링 확인
5. SSE 연결 성공 확인

**기대 결과**:
- 세션 목록에 새 항목 표시
- 터미널 화면 표시
- 상태: connected

---

### 2.2 TC-IT-02: 명령어 실행 플로우

**시나리오**: 터미널에서 명령어 입력 및 결과 확인

**사전 조건**: 연결된 세션 존재

**테스트 단계**:
1. 터미널에 "echo test" 입력
2. Enter 키 입력
3. API 호출 확인 (POST /api/terminal/session/:id/input)
4. SSE 출력 이벤트 수신
5. 터미널 화면에 결과 표시

**기대 결과**:
- 입력 문자 터미널에 표시
- "test" 출력 표시
- 상태: running → connected

---

### 2.3 TC-IT-03: 세션 전환 플로우

**시나리오**: 여러 세션 간 전환

**사전 조건**: 2개 이상 세션 존재

**테스트 단계**:
1. 세션 A 선택 (활성)
2. 세션 B 클릭
3. TerminalView 재렌더링 확인
4. 세션 B의 출력 버퍼 표시 확인

**기대 결과**:
- activeSessionId 변경
- 세션 B 터미널 화면 표시
- 세션 A의 SSE 연결 유지 (백그라운드)

---

### 2.4 TC-IT-04: 에러 복구 플로우

**시나리오**: SSE 연결 끊김 후 재연결

**사전 조건**: 연결된 세션 존재

**테스트 단계**:
1. SSE 연결 끊김 시뮬레이션
2. 에러 오버레이 표시 확인
3. "재연결" 버튼 클릭
4. SSE 재연결 시도
5. 연결 성공 확인

**기대 결과**:
- 에러 오버레이 표시
- 재연결 버튼 동작
- 연결 복구 후 터미널 정상 동작

---

## 3. 접근성 테스트

| TC ID | 테스트 항목 | 검증 방법 |
|-------|-----------|----------|
| TC-A11Y-01 | 키보드 네비게이션 | Tab으로 세션 간 이동 |
| TC-A11Y-02 | 스크린 리더 | ARIA 레이블 읽기 |
| TC-A11Y-03 | 포커스 관리 | 다이얼로그 열기/닫기 시 포커스 |

---

## 4. 성능 테스트

| 항목 | 기준 | 측정 방법 |
|------|------|----------|
| 터미널 연결 | < 500ms | 세션 생성 ~ SSE 연결 완료 |
| 출력 렌더링 지연 | < 50ms | SSE 수신 ~ 화면 표시 |
| 터미널 스크롤 | 60fps | 대량 출력 시 스크롤 성능 |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|-----------|
| 1.0 | 2025-12-17 | 초안 작성 |
