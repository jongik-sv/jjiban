[wf:review] 설계 리뷰

Task: TSK-03-03 | 리뷰어: gemini-pro

📋 검증 대상:
├── 020-detail-design.md ✅
├── 025-traceability-matrix.md ✅
├── 026-test-specification.md ✅
└── 010-basic-design.md ✅

┌────────────────┬──────┬────────────────────────────────────────────────────────┐
│ 검증 영역      │ 평가 │ 비고                                                   │
├────────────────┼──────┼────────────────────────────────────────────────────────┤
│ 문서 완전성    │ PASS │ 필수 섹션 및 메타데이터 모두 포함됨                    │
│ 요구사항 추적성│ WARN │ FR-003(PID)가 구현된 API에서 지원되지 않음             │
│ 아키텍처       │ WARN │ CLI 설계(PID 포함)와 API 구현(PID 미지원) 간 모델 불일치│
│ 보안           │ PASS │ 특이사항 없음                                          │
│ 테스트 가능성  │ PASS │ UNIT/INTEG/EDGE 케이스 적절히 ㅇㅇ정의됨                   │
└────────────────┴──────┴────────────────────────────────────────────────────────┘

이슈 분포: P1(1) P2(0) P3(1) P4(0) P5(0) = 2건

### [P1] API 모델 불일치 (Critical)
- **위치**: 020-detail-design.md (2.3 start 서브커맨드)
- **내용**: 상세설계의 API 요청 본문에는 `pid` 필드가 포함되어 있으나, 실제 구현된 서버 API(`server/api/execution/start.post.ts`) 및 매니저(`executionManager.ts`)는 `pid`를 수신/저장하지 않음.
- **영향**: PRD 9.6(터미널 세션 추적)의 요구사항인 프로세스 레벨의 식별이 불가능해짐.
- **조치 권장**: TSK-03-01(API)을 수정하여 `pid`를 지원하도록 하거나, TSK-03-03 설계에서 `pid`를 제외해야 함(후자는 PRD 위배 가능성 있음).

### [P3] Stop 명령어 상태 전달 누락 (Medium)
- **위치**: 020-detail-design.md (2.4 stop 서브커맨드)
- **내용**: `server/api/execution/stop.post.ts`는 `success`, `error` 필드를 지원하여 종료 상태를 기록할 수 있으나, 설계된 CLI `stop` 명령어는 이를 활용하지 않음.
- **영향**: 워크플로우 실패 시에도 `stop` 훅은 단순히 실행 종료만 알리게 되어, 대시보드에서 실패 여부를 파악하기 어려움.
- **조치 권장**: `exec stop` 명령어에 `--fail` 또는 `--error <msg>` 옵션을 추가하여 훅 스크립트에서 실패 상황을 전달할 수 있도록 개선 권장.

다음: /wf:apply (리뷰 내용 확인 후) 또는 /wf:build
